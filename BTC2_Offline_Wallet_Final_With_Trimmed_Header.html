<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>BTC2 Paper Wallet Generator</title>
<style>
    body {
      background-color: #1e1e1e;
      color: #ffffff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 2rem;
    }
    .logo {
      max-width: 100px;
      margin-bottom: 1rem;
    }
    h1 {
      color: #ff9900;
      margin-bottom: 0.5rem;
    }
    p {
      color: #ccc;
      margin-top: 0;
      margin-bottom: 2rem;
    }
    .box {
      background: #2a2a2a;
      padding: 2rem;
      border-radius: 10px;
      display: inline-block;
      margin-top: 1rem;
    }
    button {
      background: #ff9900;
      color: black;
      font-weight: bold;
      padding: 1rem 2rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .output {
      margin-top: 1.5rem;
      word-break: break-all;
      font-size: 1rem;
    }
    .label {
      color: #ccc;
      font-weight: bold;
      margin-top: 1rem;
      display: block;
    }
  </style>
</head>
<body><img alt="BTC2 Header Logo" src="1000013681.jpg" width="300"/>

<h1>BTC2 Paper Wallet Generator</h1>
<p>Generate a compressed BTC2 address and private key (offline-ready)</p>
<div class="box">
<button onclick="generate()">Generate Wallet</button>
<div class="output">
<span class="label">BTC2 Address:</span><div id="address"></div>
<span class="label">WIF:</span><div id="wif"></div>
<span class="label">Private Key (Hex):</span><div id="hex"></div>
</div>
</div>
<!-- Scripts -->
<script>
    const BASE58 = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';
    function base58encode(buffer) {
      let x = BigInt('0x' + Array.from(buffer).map(b => b.toString(16).padStart(2, '0')).join(''));
      let result = '';
      while (x > 0n) {
        result = BASE58[x % 58n] + result;
        x /= 58n;
      }
      for (let b of buffer) if (b === 0) result = '1' + result; else break;
      return result;
    }

    async function sha256(buf) {
      const hash = await crypto.subtle.digest("SHA-256", buf);
      return new Uint8Array(hash);
    }

    async function ripemd160(buffer) {
      const words = Array.from(buffer).map(b => b.toString(16).padStart(2, '0')).join('');
      return new Uint8Array(hexToBytes(CryptoJS.RIPEMD160(CryptoJS.enc.Hex.parse(words)).toString()));
    }

    function hexToBytes(hex) {
      const bytes = [];
      for (let c = 0; c < hex.length; c += 2)
        bytes.push(parseInt(hex.substr(c, 2), 16));
      return bytes;
    }

    function bytesToHex(bytes) {
      return Array.from(bytes).map(b => b.toString(16).padStart(2, '0')).join('');
    }

    function generatePrivateKey() {
      const array = new Uint8Array(32);
      window.crypto.getRandomValues(array);
      return array;
    }

    async function generate() {
      const privKey = generatePrivateKey();
      const hex = bytesToHex(privKey);

      const ec = new elliptic.ec('secp256k1');
      const key = ec.keyFromPrivate(hex);
      const pubKey = key.getPublic(true, 'hex');

      const pubKeyBytes = new Uint8Array(pubKey.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));
      const sha = await sha256(pubKeyBytes);
      const rmd = await ripemd160(sha);

      const addressPayload = new Uint8Array(21);
      addressPayload.set([0x00]);
      addressPayload.set(rmd, 1);

      const checksum = (await sha256(await sha256(addressPayload))).slice(0, 4);
      const fullAddress = new Uint8Array([...addressPayload, ...checksum]);

      const address = base58encode(fullAddress);

      const wifPayload = new Uint8Array(34);
      wifPayload.set([0x80]);
      wifPayload.set(privKey, 1);
      wifPayload.set([0x01], 33);

      const wifChecksum = (await sha256(await sha256(wifPayload))).slice(0, 4);
      const wifFull = new Uint8Array([...wifPayload, ...wifChecksum]);
      const wif = base58encode(wifFull);

      document.getElementById("address").innerText = address;
      document.getElementById("wif").innerText = wif;
      document.getElementById("hex").innerText = hex;
    }
  </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/elliptic/6.5.4/elliptic.min.js"></script>
</body>
</html>
